<!DOCTYPE html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>Modifying govcookiecutter - ONS govcookiecutter</title>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/javascripts/_analytics.js"></script>
    <script src="../_static/javascripts/_govuk/govuk-frontend-3.10.2.min.js"></script>
    <script src="../_static/javascripts/_govuk/modules.js"></script>
    <script src="../_static/javascripts/_modules/anchored-headings.js"></script>
    <script src="../_static/javascripts/_modules/collapsible-navigation.js"></script>
    <script src="../_static/javascripts/_modules/in-page-navigation.js"></script>
    <script src="../_static/javascripts/_modules/navigation.js"></script>
    <script src="../_static/javascripts/_modules/page-expiry.js"></script>
    <script src="../_static/javascripts/_modules/table-of-contents.js"></script>
    <script src="../_static/javascripts/_start_modules.js"></script>
    <script src="../_static/javascripts/_vendor/fixedsticky.js"></script>
    <script src="../_static/javascripts/_vendor/lodash.js"></script>
    <script src="../_static/javascripts/_vendor/modernizer.js"></script>
    <script src="../_static/javascripts/govuk_tech_docs.js"></script>
    <script src="../_static/javascripts/theme.js"></script>
    <link href="../_static/stylesheets/manifest.css" rel="stylesheet" />
    <link href="../_static/stylesheets/theme.css" rel="stylesheet" />
    <link rel="shortcut icon" href="../_static//favicon.ico"/>
  </head>
  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>
    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>
        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
          <div class="govuk-header__container govuk-header__container--full-width">

            <div class="govuk-header__logo">
  <a href="../index.html" class="govuk-header__link govuk-header__link--homepage">
    <span class="govuk-header__logotype">
      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-header__logotype-crown"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 132 97"
        height="30"
        width="36"
        >
        <path
          fill="currentColor" fill-rule="evenodd"
          d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
          ></path>
        <image src="../_static/assets/govuk/assets/images/govuk-logotype-crown.png" xlink:href="" class="govuk-header__logotype-crown-fallback-image" width="36" height="32"></image>
      </svg>
      
      <span class="govuk-header__logotype-text">ONS</span>
    </span>
    <span class="govuk-header__product-name">govcookiecutter</span>
  </a><strong class="govuk-tag">Alpha</strong></div>
            <div class="govuk-header__content" role="navigation">
  <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
  <nav>
    <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
      <li class="govuk-header__navigation-item">
        <a class="govuk-header__link" href="https://www.github.com/best-practice-and-impact/govcookiecutter">GitHub</a>
        </li>
    </ul>
  </nav>
</div>

          </div>
        </header>
      </div>
      <div id="toc-heading" class="toc-show fixedsticky">
        <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
        Table of contents <span class="toc-show__icon"></span>
        </a>
      </div>
      <div class="app-pane__body" data-module="in-page-navigation">

        <div class="app-pane__toc" role="navigation">
  <div class="toc" data-module="table-of-contents">
    <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>

    <div class="search" data-module="search">
  <form action="../search.html" method="get" role="search">
    <label class="govuk-label search__label" for="search">Search</label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
</div>

    <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">

      
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">govcookiecutter</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="README.html">Contributing guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../CODE_OF_CONDUCT.html">Code of conduct for <code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modifying <code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../%7B%7B%20cookiecutter.repo_name%20%7D%7D/.govcookiecutter/organisational_frameworks/README.html"><code class="docutils literal notranslate"><span class="pre">organisation_frameworks</span></code> folder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../%7B%7B%20cookiecutter.repo_name%20%7D%7D/docs/contributor_guide/pre_commit_hooks.html">Pre-commit hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../%7B%7B%20cookiecutter.repo_name%20%7D%7D/docs/contributor_guide/updating_gitignore.html">Updating the <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../%7B%7B%20cookiecutter.repo_name%20%7D%7D/docs/contributor_guide/writing_accessible_documentation.html">Writing accessible documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../%7B%7B%20cookiecutter.repo_name%20%7D%7D/docs/contributor_guide/writing_sphinx_documentation.html">Writing Sphinx documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../structure/README.html"><code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code> structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/README.html"><code class="docutils literal notranslate"><span class="pre">hooks</span></code> API reference</a></li>
</ul>

      <hr size="1">

      
      <h1>On this page</h1>
      <ul>
<li><a class="reference internal" href="#">Modifying <code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code></a><ul>
<li><a class="reference internal" href="#cookiecutter-template-generation"><code class="docutils literal notranslate"><span class="pre">cookiecutter</span></code> template generation</a><ul>
<li><a class="reference internal" href="#understanding-cookiecutter-json">Understanding <code class="docutils literal notranslate"><span class="pre">cookiecutter.json</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#validating-user-entries">Validating user entries</a></li>
<li><a class="reference internal" href="#conditional-files-and-or-folders">Conditional files and/or folders</a><ul>
<li><a class="reference internal" href="#changing-conditional-folders-and-files">Changing conditional folders and files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conditional-file-content">Conditional file content</a></li>
<li><a class="reference internal" href="#replacing-folders-and-files">Replacing folders and files</a></li>
<li><a class="reference internal" href="#tests-coverage-and-continuous-integration">Tests, coverage, and continuous integration</a><ul>
<li><a class="reference internal" href="#testing-jinja-templating">Testing Jinja templating</a></li>
<li><a class="reference internal" href="#continuous-integration">Continuous integration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#releases">Releases</a></li>
</ul>
</li>
</ul>


    </nav>
  </div>
</div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings" role="main">

            
  <section class="tex2jax_ignore mathjax_ignore" id="modifying-govcookiecutter">
<h1>Modifying <code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code><a class="headerlink" href="#modifying-govcookiecutter" title="Permalink to this headline">¶</a></h1>
<div class="govuk-warning-text docutils container">
<span class="govuk-warning-text__icon">!</span><strong class="govuk-warning-text__text"><span class="govuk-warning-text__assistive">Warning</span>It’s strongly recommended you build an example project to test that your changes work!</strong></div>
<p><a class="reference external" href="https://cookiecutter.readthedocs.io"><code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code> uses the <code class="docutils literal notranslate"><span class="pre">cookiecutter</span></code> Python package</a> to build
template project structures. In turn, <a class="reference external" href="https://jinja.palletsprojects.com"><code class="docutils literal notranslate"><span class="pre">cookiecutter</span></code> uses Jinja templating to inject
user-defined variables</a> into files, file names, and folder names. Most of these
variables are based on answers to prompts when you run the <code class="docutils literal notranslate"><span class="pre">cookiecutter</span></code> command.</p>
<section id="cookiecutter-template-generation">
<h2><code class="docutils literal notranslate"><span class="pre">cookiecutter</span></code> template generation<a class="headerlink" href="#cookiecutter-template-generation" title="Permalink to this headline">¶</a></h2>
<p>When you open your terminal and run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cookiecutter<span class="w"> </span>https://github.com/best-practice-and-impact/govcookiecutter.git
</pre></div>
</div>
<p>you’ll see a list of prompts to answer; one of them is <code class="docutils literal notranslate"><span class="pre">repo_name</span></code>.</p>
<p>Your answer for <code class="docutils literal notranslate"><span class="pre">repo_name</span></code> is used to overwrite every instance of
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}</span></code>. The first instance is the <code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code> folder
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}</span></code>, which becomes your outputted project!</p>
<p>This means every folder and file contained within the <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}</span></code>
folder becomes part of your output project, including their content. Anything else
outside of this folder in <code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code> will not exist in the outputted project.</p>
<section id="understanding-cookiecutter-json">
<h3>Understanding <code class="docutils literal notranslate"><span class="pre">cookiecutter.json</span></code><a class="headerlink" href="#understanding-cookiecutter-json" title="Permalink to this headline">¶</a></h3>
<p>The prompts, and their default responses are defined in <code class="docutils literal notranslate"><span class="pre">cookiecutter.json</span></code>. Here, any
keys starting with <code class="docutils literal notranslate"><span class="pre">_</span></code> are not shown to the user, but provide template extensions.</p>
<p>One such extension is <code class="docutils literal notranslate"><span class="pre">jinja2_time.TimeExtension</span></code>, which is used to add the correct
year in the <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}/LICENSE</span></code> file.</p>
<p>All other keys are used to inject the user responses throughout the template. This
happens wherever you see <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.{KEY}</span> <span class="pre">}}</span></code>, where <code class="docutils literal notranslate"><span class="pre">{KEY}</span></code> is the key in
question.</p>
<p>The values in <code class="docutils literal notranslate"><span class="pre">cookiecutter.json</span></code> are the default responses, shown in squared brackets
to the user. If the user does not enter a response, these default values are used.
Values that are lists are shown as numerical options to the user, with the first list
element as the default value.</p>
<p>Note that these default values can also contain Jinja templating! For example, the
default response for <code class="docutils literal notranslate"><span class="pre">repo_name</span></code> is actually based on <code class="docutils literal notranslate"><span class="pre">project_name</span></code>, but with all
characters in lowercase, and any spaces replaced with hyphens.</p>
</section>
</section>
<section id="validating-user-entries">
<h2>Validating user entries<a class="headerlink" href="#validating-user-entries" title="Permalink to this headline">¶</a></h2>
<p>User entries are validated with pre-generation hooks, which are defined in
<code class="docutils literal notranslate"><span class="pre">hooks/pre_gen_project.py</span></code>. These hooks run before a project is created and, if they
fail, will not create the project.</p>
<p>The only supported validation currently is for a <a class="reference external" href="https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address">valid email address, based on the
HTML5 standard for email address format</a>.</p>
</section>
<section id="conditional-files-and-or-folders">
<h2>Conditional files and/or folders<a class="headerlink" href="#conditional-files-and-or-folders" title="Permalink to this headline">¶</a></h2>
<p>Conditional folders and/or files are items than only exist if actively selected for the
user. For example, if users select <code class="docutils literal notranslate"><span class="pre">No</span></code> for the <code class="docutils literal notranslate"><span class="pre">using_R</span></code> prompt, any R files and
content is removed from their outputted project.</p>
<div class="govuk-notification-banner docutils container">
<div class="govuk-notification-banner__header"><h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">Folder and file names with Jinja templating</h2></div><div class="govuk-notification-banner__content docutils container">
<p><p>Do not use Jinja templating for conditional folders and/or files, as certain characters
may not be supported on all operating systems.</p>
</p>
</div>
</div>
<p>This functionality is provided by post-generation hooks in <code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code>, which are
defined in <code class="docutils literal notranslate"><span class="pre">hooks/post_gen_project.py</span></code>. These hooks only run after a project has been
generated and, if they fail, will rollback the entire project.</p>
<p>Conditional files and folders are defined as <code class="docutils literal notranslate"><span class="pre">features</span></code> in the
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}/manifest.json</span></code> file, which looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;A name&quot;</span><span class="p">,</span>
      <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A description.&quot;</span><span class="p">,</span>
      <span class="s2">&quot;remove&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">cookiecutter</span><span class="o">.</span><span class="p">{</span><span class="n">KEY</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">VALUE</span><span class="p">}</span> <span class="o">%</span><span class="p">}</span><span class="n">true</span><span class="p">{</span><span class="o">%</span> <span class="k">else</span> <span class="o">%</span><span class="p">}</span><span class="n">false</span><span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">},</span>
      <span class="s2">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;of&quot;</span><span class="p">,</span> <span class="s2">&quot;files&quot;</span><span class="p">,</span> <span class="s2">&quot;and/or&quot;</span><span class="p">,</span> <span class="s2">&quot;folders&quot;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">{KEY}</span></code> and <code class="docutils literal notranslate"><span class="pre">{VALUE}</span></code> are <code class="docutils literal notranslate"><span class="pre">cookiecutter.json</span></code> keys and values.</p>
<p>This works by using Jinja conditional templating to either set the <code class="docutils literal notranslate"><span class="pre">remove</span></code> value to
true or false. The post-generation hook then scans through this JSON file deleting all
files and folders listed in the <code class="docutils literal notranslate"><span class="pre">resources</span></code> value where <code class="docutils literal notranslate"><span class="pre">remove</span> <span class="pre">==</span> <span class="pre">true</span></code>.</p>
<section id="changing-conditional-folders-and-files">
<h3>Changing conditional folders and files<a class="headerlink" href="#changing-conditional-folders-and-files" title="Permalink to this headline">¶</a></h3>
<p>If an existing feature has a <code class="docutils literal notranslate"><span class="pre">remove</span></code> condition that meets your needs, amend its
<code class="docutils literal notranslate"><span class="pre">resources</span></code> list to change the folders/files that will be removed.</p>
<p>To add a new feature, add a dictionary within the <code class="docutils literal notranslate"><span class="pre">features</span></code> list, which has at least
the <code class="docutils literal notranslate"><span class="pre">remove</span></code> and <code class="docutils literal notranslate"><span class="pre">resources</span></code> keys. Add your Jinja conditional for the <code class="docutils literal notranslate"><span class="pre">remove</span></code> value,
and a list of files/folders for the <code class="docutils literal notranslate"><span class="pre">resources</span></code> key. For documentation purposes, it’s
good practice to add <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">description</span></code> keys as well!</p>
<p>To remove a feature, delete the appropriate dictionary from the <code class="docutils literal notranslate"><span class="pre">features</span></code> list.</p>
</section>
</section>
<section id="conditional-file-content">
<h2>Conditional file content<a class="headerlink" href="#conditional-file-content" title="Permalink to this headline">¶</a></h2>
<p>Jinja conditional statements can be used display content based on the user responses.
For example, for the following Markdown:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gu">### `CONTRIBUTING.md`</span>

The contributing guidelines for this project.

{% if cookiecutter.using_R == &quot;Yes&quot; -%}
<span class="gu">### `DESCRIPTION`</span>

R-specific information related to the project including the name, authors and packages
necessary for the project.

{% endif -%}

<span class="gu">### `LICENSE`</span>

The licence for this project...
</pre></div>
</div>
<p>the <code class="docutils literal notranslate"><span class="pre">DESCRIPTION</span></code> section is conditional on the user response to the <code class="docutils literal notranslate"><span class="pre">using_R</span></code> prompt.</p>
<p>Notice the hyphen before the trailing <code class="docutils literal notranslate"><span class="pre">%</span></code> in each Jinja statement; this hyphen controls
blank space after the statement. A hyphen after the leading <code class="docutils literal notranslate"><span class="pre">%</span></code> in a Jinja statement
controls blank space before the element.</p>
</section>
<section id="replacing-folders-and-files">
<h2>Replacing folders and files<a class="headerlink" href="#replacing-folders-and-files" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/best-practice-and-impact/govcookiecutter/blob/main/docs/%7B%7B%20cookiecutter.repo_name%20%7D%7D/.govcookiecutter/organisational_frameworks/README.md">Replacing folders and files a more involved change, and is currently supported for
AQA frameworks and pull/merge request templates only</a>.
These are performed in the <code class="docutils literal notranslate"><span class="pre">hooks/post_gen_project.py</span></code>file.</p>
</section>
<section id="tests-coverage-and-continuous-integration">
<h2>Tests, coverage, and continuous integration<a class="headerlink" href="#tests-coverage-and-continuous-integration" title="Permalink to this headline">¶</a></h2>
<p>All pre- and post-generation hooks should be fully tested, alongside any generic
functions that we want to supply to users within the <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}/src</span></code>
package. These tests should be written in <code class="docutils literal notranslate"><span class="pre">tests</span></code> or
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}/tests</span></code> as appropriate.</p>
<p>Coverage also only covers the <code class="docutils literal notranslate"><span class="pre">hooks</span></code> and <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}/src</span></code> folders.</p>
<section id="testing-jinja-templating">
<h3>Testing Jinja templating<a class="headerlink" href="#testing-jinja-templating" title="Permalink to this headline">¶</a></h3>
<p>Most of the tests are straightforward, and comprehensive. However, to test the Jinja
injection of user responses, the <code class="docutils literal notranslate"><span class="pre">test_govcookiecutter_injected_variables.py</span></code> script
adopts a test-driven development approach to completeness.</p>
<p>This test parses all the content of the <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">cookiecutter.repo_name</span> <span class="pre">}}</span></code> folder, and
counts the number of times the replacement variable and its variations appear.</p>
<p>The constant dictionary variables at the top of the test script define the different
variations of Jinja templating expected for each prompt, and their expected counts.
The dictionary keys are replaced during the test with the test input variables.</p>
<p>If you modify the content, beware that these counts may change, so you will have to
change these counts to pass the tests.</p>
</section>
<section id="continuous-integration">
<h3>Continuous integration<a class="headerlink" href="#continuous-integration" title="Permalink to this headline">¶</a></h3>
<p>Continuous integration (CI) is provided by GitHub Actions. For all pushes to the
repository, GitHub Actions will:</p>
<ul class="simple">
<li><p>install the requirements</p></li>
<li><p>run pre-commit hooks on all files</p></li>
<li><p>create the documentation to check for errors and warnings</p>
<ul>
<li><p>only errors are checked for Windows</p></li>
</ul>
</li>
<li><p>check for broken external links in the documentation</p></li>
<li><p>run tests and coverage</p></li>
<li><p>upload coverage reports to CodeCov</p></li>
</ul>
<p>These “on push” CI checks are run on Ubuntu, macOS, and Windows operating systems, as
well as Python 3.6+. This Action can be found at <code class="docutils literal notranslate"><span class="pre">workflows/govcookiecutter-build.yml</span></code>.</p>
<p>When a pull request is raised, GitHub Actions will also:</p>
<ul class="simple">
<li><p>build an example project</p></li>
<li><p>navigate into the example project</p></li>
<li><p>initialise Git</p></li>
<li><p>install requirements</p></li>
<li><p>build the example project documentation, checking for errors but not warnings</p></li>
<li><p>check for broken external links in the documentation</p></li>
<li><p>run pre-commit hooks on all files</p></li>
</ul>
<p>These “on pull request” CI checks are run on Ubuntu, and macOS operating systems, as
well as Python 3.6+, and for example projects with or without R 4.0.4+.</p>
<p><a class="reference external" href="https://github.com/best-practice-and-impact/govcookiecutter/issues">To understand why only certain operating systems are supported for GitHub Actions,
see GitHub issues 29 and 30</a>.</p>
</section>
</section>
<section id="releases">
<h2>Releases<a class="headerlink" href="#releases" title="Permalink to this headline">¶</a></h2>
<p>Pull requests are raised on GitHub, and approved features are merged into <code class="docutils literal notranslate"><span class="pre">main</span></code>. <a class="reference external" href="https://semver.org/">We
then use semantic versioning to number our releases</a>. This helps our users
select a different version of <code class="docutils literal notranslate"><span class="pre">govcookiecutter</span></code> to use based on their individual needs.</p>
</section>
</section>



          </main>

          <aside>
  <ul class="contribution-banner">
    
    <li><a href="https://www.github.com/best-practice-and-impact/govcookiecutter/blob/main/docs/contributing_guide/modify_govcookiecutter.md">View source</a></li>
    <li><a href="https://www.github.com/best-practice-and-impact/govcookiecutter/issues/new?labels=bug&amp;title=Re:%20'contributing_guide/modify_govcookiecutter.md'&amp;body=Problem%20with%20'contributing_guide/modify_govcookiecutter.md'%20(docs/)">Report problem</a></li>
    <li><a href="https://www.github.com/best-practice-and-impact/govcookiecutter">GitHub Repo</a></li>
    
  </ul>
</aside>
          <footer class="govuk-footer app-footer" role="contentinfo">
<div class="govuk-footer__meta">
  <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">
    <ul class="govuk-footer__inline-list">
      <li class="govuk-footer__inline-list-item">
        <a class="govuk-footer__link" href="../accessibility.html">Accessibility</a>
      </li>
      <li class="govuk-footer__inline-list-item">
        Built with <a class="govuk-footer__link" href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0 using the <a class="govuk-footer__link" href="https://www.github.com/ukgovdatascience/govuk-tech-docs-sphinx-theme">GOV.UK Tech Docs Sphinx Theme</a>.
      </li>
    </ul>
    <svg
      aria-hidden="true"
      focusable="false"
      class="govuk-footer__licence-logo"
      xmlns="http://www.w3.org/2000/svg"
      viewbox="0 0 483.2 195.7"
      height="17"
      width="41"
      >
      <path
        fill="currentColor"
        d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
    </svg>
    <span class="govuk-footer__licence-description">
    All content is available under the
    <a
      class="govuk-footer__link"
      href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
      rel="license"
      >Open Government Licence v3.0</a>, except where otherwise stated
    </span>
  </div>
  <div class="govuk-footer__meta-item">
    <a
      class="govuk-footer__link govuk-footer__copyright-logo"
      href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
  </div>
</div>
</footer>

        </div>
      </div>
    </div>
  </body>
</html>